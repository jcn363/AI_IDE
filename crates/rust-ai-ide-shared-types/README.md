# Rust AI IDE Shared Types Crate

[![Rust](https://img.shields.io/badge/rust-1.91%2B-orange)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT%20OR%20Apache--2.0-blue)](LICENSE)
[![Documentation](https://img.shields.io/badge/docs-latest-green)](docs/)

A comprehensive shared types crate providing automated **TypeScript generation** from **Rust definitions** with cross-platform type consistency and seamless integration.

## âœ¨ Features

- ğŸš€ **Automated Multi-Platform Generation** - TypeScript, Python, Go, GraphQL, OpenAPI, JSON Schema
- ğŸ”„ **Cross-Platform Compatibility** - Type safety across Rust backend and multiple frontends
- ğŸ§© **Extensible Plugin System** - 4 built-in plus custom plugins for type transformations
- âš™ï¸ **Advanced Configuration** - Production/Dev presets with fine-grained control
- ğŸ“Š **Comprehensive Validation** - Automated compatibility checking across platforms
- ğŸ—‚ï¸ **Intelligent Caching** - Performance optimization with TTL and size management
- ğŸ“‹ **Rich Documentation** - Auto-generated docs with platform-specific commenting
- ğŸ” **Deep Type Analysis** - Static analysis with syn for accurate type extraction
- ğŸ¯ **Zero Configuration** - Sensible defaults with customization when needed
- ğŸ”§ **Production Ready** - Error handling, logging, and performance monitoring

## ğŸ¯ Quick Start

### 1. Add to your Cargo.toml

```toml
[dependencies]
rust-ai-ide-shared-types = { path = "crates/rust-ai-ide-shared-types" }
```

### 2. Basic Usage

```rust
use rust_ai_ide_shared_types::{create_typescript_generator, validate_cross_platform};

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Create a TypeScript generator
    let generator = create_typescript_generator()?;

    // Define your Rust types
    let rust_code = r#"
        pub struct User {
            pub id: u32,
            pub name: String,
            pub email: Option<String>,
        }
    "#;

    // Generate TypeScript
    let result = generator.generate_types_from_source(
        rust_code,
        "types.rs",
        &["User"] // Generate specific types
    )?;

    println!("{}", result.content);
    Ok(())
}
```

### 3. Generated TypeScript

```typescript
// Generated by Rust AI IDE Shared Types
// Do not edit manually

export interface User {
  id: number;
  name: string;
  email?: string | undefined;
}
```

## ğŸ—ï¸ Architecture

```
rust-ai-ide-shared-types/
â”œâ”€â”€ parsing/          # AST parsing and type extraction (syn-based)
â”œâ”€â”€ generation/       # Code generation engines (TypeScript, etc.)
â”œâ”€â”€ bridge/          # Cross-platform type bridging and validation
â”œâ”€â”€ plugins/         # Plugin system for custom transformations
â”œâ”€â”€ transformers/    # Built-in type transformation logic
â”œâ”€â”€ config/          # Configuration management and presets
â”œâ”€â”€ errors/          # Unified error handling
â”œâ”€â”€ types/           # Core type definitions and metadata
â””â”€â”€ utils/           # Shared utilities and helpers
```

## ğŸ“– Advanced Usage

### Custom Configuration

```rust
use rust_ai_ide_shared_types::{GenerationConfig, TypeGenerator};

let mut config = GenerationConfig::preset_development();
config.typescript.naming_convention = NamingConvention::CamelCase;
config.typescript.generate_type_guards = true;

let generator = TypeGenerator::with_full_config(config)?;
```

### Cross-Platform Validation

```rust
let validation_result = validate_cross_platform(&types, &config).await?;

if validation_result.compatible {
    println!("âœ… All types are cross-platform compatible!");
    println!("Compatibility Score: {:.1}%", validation_result.compatibility_score * 100.0);
} else {
    println!("âš ï¸  Found compatibility issues:");
    for issue in &validation_result.issues {
        println!("  - {}", issue.description);
    }
}
```

### Plugin System (Feature: plugins)

```rust
use rust_ai_ide_shared_types::plugins::PluginSystem;

let mut plugin_system = PluginSystem::new()?;

// Load plugins from directory
plugin_system.load_plugins().await?;

// Get available transformers
let transformers = plugin_system.get_transformer_plugins();
```

## âš™ï¸ Configuration Options

### TypeScript Generation

```rust
TypeScriptConfig {
    output_dir: "generated/types".into(),
    naming_convention: NamingConvention::PascalCase,
    type_mappings: HashMap::new(),
    generate_index: true,
    generate_docs: true,
    generate_type_guards: false,
    strict_null_checks: true,
    target_version: TypeScriptVersion::ES2020,
    module_system: ModuleSystem::ESModules,
    type_overrides: HashMap::new(),
}
```

### Caching Configuration

```rust
CacheConfig {
    enabled: true,
    cache_dir: ".shared-types-cache".into(),
    ttl_seconds: 3600,
    max_size_mb: 100,
}
```

## ğŸ”§ Type Mappings

### Default Mappings

| Rust Type | TypeScript Type |
|-----------|-----------------|
| `String` | `string` |
| `str` | `string` |
| `i32` | `number` |
| `bool` | `boolean` |
| `Vec<T>` | `Array<T>` |
| `Option<T>` | `T \| undefined` |
| `Result<T, E>` | `T` (simplified) |
| `HashMap<K, V>` | `Record<K, V>` |

### Custom Mappings

```rust
let mut type_mappings = HashMap::new();
type_mappings.insert("MyCustomType".to_string(), "MyCustomInterface".to_string());
config.typescript.type_mappings = type_mappings;
```

## ğŸ”Œ Supported Platforms & Plugins

The shared types crate supports generation for multiple target platforms through its extensible plugin system:

### ğŸ¯ Built-in Platforms

| Platform | Plugin | Status | Features |
|----------|--------|--------|----------|
| **TypeScript** | Core | âœ… Stable | Interfaces, type aliases, enums |
| **Python** |python-generator | âœ… Stable | Dataclasses, Pydantic, TypedDict |
| **Go** | go-generator | âœ… Stable | Structs with JSON/BSON tags |
| **GraphQL** | graphql-generator | âœ… Stable | Schema, Federation, Mutations |
| **OpenAPI** | openapi-generator | âœ… Stable | REST API specifications |
| **JSON Schema** | json-schema-transformer | âœ… Stable | Schema validation formats |

### ğŸ”§ Plugin Features

#### TypeScript Generator
- âœ… Interface generation with JSDoc
- âœ… Type guard functions
- âœ… Enum and union types
- âœ… Null/undefined handling
- âœ… Strict mode support

#### Python Plugin
- âœ… Dataclass generation
- âœ… Pydantic model support
- âœ… TypedDict fallbacks
- âœ… Automatic imports

#### Go Plugin
- âœ… Struct generation
- âœ… JSON/BSON tags
- âœ… Getter method generation
- âœ… Package organization

#### GraphQL Plugin
- âœ… Schema generation
- âœ… Apollo Federation support
- âœ… Mutation definitions
- âœ… Subscription schemas

#### OpenAPI Plugin
- âœ… OpenAPI 3.0/3.1 support
- âœ… REST endpoint examples
- âœ… Schema validation
- âœ… Documentation generation

### ğŸš€ Platform-Specific Usage

```rust
// Generate TypeScript
let config = serde_json::json!({"generate_type_guards": true});
generator.generate_types_from_source(source, "types.rs", &["User"]).await?;

// Generate Python dataclass
let config = serde_json::json!({"format": "dataclass"});
generator.generate_types_from_source(source, "types.rs", &["User"]).await?;

// Generate Go structs
let config = serde_json::json!({"package": "model", "json_tags": true});
generator.generate_types_from_source(source, "types.rs", &["User"]).await?;

// Generate GraphQL schema
let config = serde_json::json!({"schema_type": "federation"});
generator.generate_types_from_source(source, "types.rs", &["User"]).await?;

// Generate OpenAPI spec
let config = serde_json::json!({"version": "1.0.0", "example_paths": true});
generator.generate_types_from_source(source, "types.rs", &["User"]).await?;
```

## ğŸŒŸ Examples

Run the included examples:

```bash
# Basic usage
cargo run --example basic_usage

# Advanced configuration
cargo run --example advanced_config

# Multi-platform generation
cargo run --example multi_platform

# Full plugin showcase
cargo run --example showcase
```

## ğŸ§ª Testing

Run tests with different features:

```bash
# Standard tests
cargo test

# With TypeScript features
cargo test --features typescript

# With plugin support
cargo test --features plugins

# All features
cargo test --features full
```

## ğŸ“Š Benchmarks

Performance benchmarks for type generation:

```bash
cargo bench
```

## ğŸ”Œ Plugin Development

Create custom type transformation plugins:

```rust
use rust_ai_ide_shared_types::plugins::*;

#[async_trait]
impl TransformerPluginTrait for MyTransformer {
    fn name(&self) -> &str { "my-transformer" }

    async fn transform_type(
        &self,
        rust_type: &ParsedType,
        context: &TransformationContext,
    ) -> Result<Option<GeneratedCode>, PluginError> {
        // Your transformation logic here
        Ok(Some(generated_code))
    }
}
```

## ğŸ¤ Integration

### With Existing Crates

The shared types crate integrates seamlessly with:

- `rust-ai-ide-errors` - Unified error handling
- `rust-ai-ide-cache` - Caching infrastructure
- `rust-ai-ide-common` - Shared utilities
- `rust-ai-ide-config` - Configuration management

### Type Generation Workflow

```mermaid
graph TD
    A[Rust Source] --> B[AST Parsing]
    B --> C[Type Analysis]
    C --> D[Validation]
    D --> E[Transformation]
    E --> F[Code Generation]
    F --> G[TypeScript Output]
```

## ğŸ“ˆ Performance

- **Zero-copy parsing** using syn
- **Intelligent caching** with TTL and size limits
- **Parallel processing** for large type sets
- **Lazy evaluation** for complex transformations

## ğŸ¯ Best Practices

### 1. Use Attributes for Control

```rust
#[skip_typescript]
pub struct InternalType {
    // Won't be generated
}

#[derive(Serialize, Deserialize)]
pub struct PublicType {
    // Will be generated with proper mappings
}
```

### 2. Leverage Documentation

```rust
/// User management API
pub struct UserApi {
    /// Get user by ID
    pub get_user: fn(u32) -> Result<User, ApiError>,
}
```

### 3. Configure for Your Project

```rust
let config = GenerationConfig::preset_production();
// Customize for your needs
config.typescript.target_version = TypeScriptVersion::ES2022;
```

## ğŸ”® Roadmap

- [ ] WebAssembly target support
- [ ] Python code generation
- [ ] Advanced plugin ecosystem
- [ ] Real-time type synchronization
- [ ] IDE integration
- [ ] Custom DSL support

## ğŸ“š Documentation

- [API Reference](docs/api/)
- [Migration Guide](docs/migration/)
- [Plugin Development](docs/plugins/)
- [Configuration Guide](docs/config/)

## ğŸ¤ Contributing

See our [contributing guide](CONTRIBUTING.md) for details on:

- Code style and conventions
- Testing requirements
- Documentation standards
- Release process

## ğŸ“„ License

This project is licensed under either of:
- Apache License, Version 2.0 ([LICENSE-APACHE](LICENSE-APACHE))
- MIT License ([LICENSE-MIT](LICENSE-MIT))

at your option.

## ğŸ™ Acknowledgments

Built on top of excellent Rust ecosystem crates:
- `syn` - AST parsing and manipulation
- `quote` - Code generation
- `serde` - Serialization framework
- `tokio` - Async runtime
- `thiserror` - Error handling

---

**Made with â¤ï¸ for the Rust AI IDE community**